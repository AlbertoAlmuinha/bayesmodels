<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with garchmodels • garchmodels</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with garchmodels">
<meta property="og:description" content="garchmodels">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">garchmodels</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started with garchmodels</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting-started_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started with garchmodels</h1>
            
      
      
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<p><img src="univariate_multivariate.png" width="100%" style="display: block; margin: auto;"><br><img src="logo-garchmodels.png" width="147" height="170" align="right"></p>
<p>This tutorial shows you how you can start using <code>garchmodels</code>. The first thing to be clear about is that the package has two main functions:</p>
<ul>
<li><p><strong>garch_reg</strong>: This function implements the univariate models and currently its only engine is <code>rugarch</code>.</p></li>
<li><p><strong>garch_multivariate_reg</strong>: This function implements the multivariate methods and connects to the rugarch and rmgarch packages. The engines you can currently connect to are the following: <code>rugarch</code>, <code>dcc_rmgarch</code>, <code>c_rmgarch</code> and <code>gogarch_rmgarch</code>.</p></li>
</ul>
<div id="univariate-example" class="section level1">
<h1 class="hasAnchor">
<a href="#univariate-example" class="anchor"></a>Univariate Example</h1>
<p>First, we load the necessary packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">garchmodels</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/timetk">timetk</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>The data we will use is IBM’s daily returns from March 2007 through December 2020. The data is contained in a tibble that comes with the garchmodels package itself.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rIBM</span>
<span class="co">#&gt; # A tibble: 3,523 x 2</span>
<span class="co">#&gt;    date       daily_returns</span>
<span class="co">#&gt;    &lt;date&gt;             &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2007-01-03      0.000926</span>
<span class="co">#&gt;  2 2007-01-04      0.0107  </span>
<span class="co">#&gt;  3 2007-01-05     -0.00905 </span>
<span class="co">#&gt;  4 2007-01-08      0.0152  </span>
<span class="co">#&gt;  5 2007-01-09      0.0118  </span>
<span class="co">#&gt;  6 2007-01-10     -0.0118  </span>
<span class="co">#&gt;  7 2007-01-11     -0.00243 </span>
<span class="co">#&gt;  8 2007-01-12      0.00699 </span>
<span class="co">#&gt;  9 2007-01-16      0.0149  </span>
<span class="co">#&gt; 10 2007-01-17     -0.00793 </span>
<span class="co">#&gt; # ... with 3,513 more rows</span></code></pre></div>
<p>We will extend the dataset to a 3-day horizon forecast and separate the dataset into train and future dataset.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rIBM_extended</span> <span class="op">&lt;-</span> <span class="va">rIBM</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/future_frame.html">future_frame</a></span><span class="op">(</span>.length_out <span class="op">=</span> <span class="fl">3</span>, .bind_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> 

<span class="va">rIBM_train</span>  <span class="op">&lt;-</span> <span class="va">rIBM_extended</span> <span class="op">%&gt;%</span> <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span>
<span class="va">rIBM_future</span> <span class="op">&lt;-</span> <span class="va">rIBM_extended</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">daily_returns</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Next, we create the GARCH model for the variance:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_fit_garch</span> <span class="op">&lt;-</span><span class="fu">garchmodels</span><span class="fu">::</span><span class="fu"><a href="../reference/garch_reg.html">garch_reg</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"regression"</span>,
                                         arch_order <span class="op">=</span> <span class="fl">1</span>,
                                         garch_order <span class="op">=</span> <span class="fl">1</span>,
                                         ma_order <span class="op">=</span> <span class="fl">0</span>,
                                         ar_order <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
                  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"rugarch"</span>, mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>include.mean <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
                  <span class="fu">fit</span><span class="op">(</span><span class="va">daily_returns</span> <span class="op">~</span> <span class="va">date</span>, data <span class="op">=</span> <span class="va">rIBM_train</span><span class="op">)</span></code></pre></div>
<p>We will graphically represent the Series with 1% VaR Limits and the Conditional SD (vs |returns|):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit_garch</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; please wait...calculating quantiles...</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit_garch</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Let us now predict about the future dataset:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">model_fit_garch</span>, <span class="va">rIBM_future</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 1</span>
<span class="co">#&gt;   .pred</span>
<span class="co">#&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     0</span>
<span class="co">#&gt; 2     0</span>
<span class="co">#&gt; 3     0</span></code></pre></div>
<p>We will now create a combined model using a GARCH model for the variance and an ARMA model for the mean:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_fit_garch</span> <span class="op">&lt;-</span><span class="fu">garchmodels</span><span class="fu">::</span><span class="fu"><a href="../reference/garch_reg.html">garch_reg</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"regression"</span>,
                                         arch_order <span class="op">=</span> <span class="fl">1</span>,
                                         garch_order <span class="op">=</span> <span class="fl">1</span>,
                                         ma_order <span class="op">=</span> <span class="fl">2</span>,
                                         ar_order <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>
                  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"rugarch"</span><span class="op">)</span> <span class="op">%&gt;%</span>
                  <span class="fu">fit</span><span class="op">(</span><span class="va">daily_returns</span> <span class="op">~</span> <span class="va">date</span>, data <span class="op">=</span> <span class="va">rIBM_train</span><span class="op">)</span></code></pre></div>
<p>Let’s again represent the Series with 1% VaR Limits and the Conditional SD (vs |returns|):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit_garch</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; please wait...calculating quantiles...</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit_garch</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-11-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Let us now predict about the future dataset:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">model_fit_garch</span>, <span class="va">rIBM_future</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 1</span>
<span class="co">#&gt;       .pred</span>
<span class="co">#&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1  0.00147 </span>
<span class="co">#&gt; 2 -0.000101</span>
<span class="co">#&gt; 3 -0.000608</span></code></pre></div>
</div>
<div id="multivariate-example" class="section level1">
<h1 class="hasAnchor">
<a href="#multivariate-example" class="anchor"></a>Multivariate Example</h1>
<p>For this section, we will work with the daily returns of IBM, Google and BP from 2007 to 2020. To work with multivariate models, the input format should be like this table:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rX_longer</span>
<span class="co">#&gt; # A tibble: 8,550 x 3</span>
<span class="co">#&gt;    id        value date      </span>
<span class="co">#&gt;    &lt;chr&gt;     &lt;dbl&gt; &lt;date&gt;    </span>
<span class="co">#&gt;  1 rIBM   0.000926 2007-01-03</span>
<span class="co">#&gt;  2 rBP   -0.0192   2007-01-03</span>
<span class="co">#&gt;  3 rGOOG  0.00341  2007-01-03</span>
<span class="co">#&gt;  4 rIBM   0.0107   2007-01-04</span>
<span class="co">#&gt;  5 rBP   -0.0132   2007-01-04</span>
<span class="co">#&gt;  6 rGOOG  0.0335   2007-01-04</span>
<span class="co">#&gt;  7 rIBM  -0.00905  2007-01-05</span>
<span class="co">#&gt;  8 rBP   -0.00215  2007-01-05</span>
<span class="co">#&gt;  9 rGOOG  0.00813  2007-01-05</span>
<span class="co">#&gt; 10 rIBM   0.0152   2007-01-08</span>
<span class="co">#&gt; # ... with 8,540 more rows</span></code></pre></div>
<p>We will extend the dataset to a 3-day horizon forecast and separate the dataset into train and future dataset.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rX_longer_extended</span> <span class="op">&lt;-</span> <span class="va">rX_longer</span> <span class="op">%&gt;%</span>
    <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/future_frame.html">future_frame</a></span><span class="op">(</span>.length_out <span class="op">=</span> <span class="fl">3</span>, .bind_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span>

<span class="va">rX_train</span>  <span class="op">&lt;-</span> <span class="va">rX_longer_extended</span> <span class="op">%&gt;%</span> <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span>
<span class="va">rX_future</span> <span class="op">&lt;-</span> <span class="va">rX_longer_extended</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="rugarch-engine" class="section level2">
<h2 class="hasAnchor">
<a href="#rugarch-engine" class="anchor"></a>Rugarch Engine</h2>
<p>To create a model with the rugarch engine, the first thing to do is to specify in a list called “specs” through set_engine the specifications of the models. It is also important to note that the formula should always be the return against the date variable followed by the id variable. For more information see ?garch_multivariate_reg.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/garch_multivariate_reg.html">garch_multivariate_reg</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"regression"</span>, type <span class="op">=</span> <span class="st">"ugarchspec"</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">set_engine</span><span class="op">(</span><span class="st">"rugarch"</span> , specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>spec1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                        spec2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                        spec3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
    <span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">fit</span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="va">date</span> <span class="op">+</span> <span class="va">id</span>, data <span class="op">=</span> <span class="va">rX_train</span><span class="op">)</span></code></pre></div>
<p>We now predict on the future dataset:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">model_fit</span>, <span class="va">rX_future</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 18 x 4</span>
<span class="co">#&gt;    .pred_name .pred_value .pred_date$date .pred_.name</span>
<span class="co">#&gt;    &lt;chr&gt;            &lt;dbl&gt; &lt;date&gt;          &lt;chr&gt;      </span>
<span class="co">#&gt;  1 rIBM          0.000369 2018-04-28      Series     </span>
<span class="co">#&gt;  2 rBP           0.000473 2018-04-28      Series     </span>
<span class="co">#&gt;  3 rGOOG         0.000750 2018-04-28      Series     </span>
<span class="co">#&gt;  4 rIBM          0.000342 2018-04-29      Series     </span>
<span class="co">#&gt;  5 rBP           0.000465 2018-04-29      Series     </span>
<span class="co">#&gt;  6 rGOOG         0.000851 2018-04-29      Series     </span>
<span class="co">#&gt;  7 rIBM          0.000342 2018-04-30      Series     </span>
<span class="co">#&gt;  8 rBP           0.000465 2018-04-30      Series     </span>
<span class="co">#&gt;  9 rGOOG         0.000852 2018-04-30      Series     </span>
<span class="co">#&gt; 10 rIBM          0.0164   2018-04-28      Sigma      </span>
<span class="co">#&gt; 11 rBP           0.0133   2018-04-28      Sigma      </span>
<span class="co">#&gt; 12 rGOOG         0.0195   2018-04-28      Sigma      </span>
<span class="co">#&gt; 13 rIBM          0.0162   2018-04-29      Sigma      </span>
<span class="co">#&gt; 14 rBP           0.0134   2018-04-29      Sigma      </span>
<span class="co">#&gt; 15 rGOOG         0.0196   2018-04-29      Sigma      </span>
<span class="co">#&gt; 16 rIBM          0.0160   2018-04-30      Sigma      </span>
<span class="co">#&gt; 17 rBP           0.0135   2018-04-30      Sigma      </span>
<span class="co">#&gt; 18 rGOOG         0.0196   2018-04-30      Sigma</span></code></pre></div>
</div>
<div id="dcc-engine" class="section level2">
<h2 class="hasAnchor">
<a href="#dcc-engine" class="anchor"></a>DCC Engine</h2>
<p>To create a model with the <code>dcc_rmgarch</code> engine, the first thing to do is to specify in a list called <strong>specs</strong> through set_engine the specifications of the models. You can also specify the arguments to be passed to <code><a href="https://rdrr.io/pkg/rmgarch/man/dccspec-methods.html">rmgarch::dccspec()</a></code> through the <strong>dcc_specs</strong> list as seen in the following example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/garch_multivariate_reg.html">garch_multivariate_reg</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"ugarchspec"</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">set_engine</span><span class="op">(</span><span class="st">"dcc_rmgarch"</span> , specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>spec1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                            spec2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                            spec3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                               dcc_specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>dccOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, distribution <span class="op">=</span> <span class="st">"mvlaplace"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">fit</span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="va">date</span> <span class="op">+</span> <span class="va">id</span>, data <span class="op">=</span> <span class="va">rX_train</span><span class="op">)</span></code></pre></div>
<p>Let’s visualize the graphics available through the model:</p>
<ul>
<li>Conditional Mean (vs Realized Returns):</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;"></p>
<ul>
<li>Conditional Sigma (vs Realized Absolute Returns)</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;"></p>
<ul>
<li>Conditional Covariance</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;"></p>
<ul>
<li>Conditional Correlation</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;"></p>
<ul>
<li>EW Portfolio Plot with conditional density VaR limitis</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">model_1</span>, which <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>We now predict on the future dataset:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">model_fit</span>, <span class="va">rX_future</span><span class="op">)</span></code></pre></div>
<p>As you can see, the results are returned in a nested tibble. For example, if you want to get the correlation matrices:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">predictions</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">.name</span> <span class="op">==</span> <span class="st">"R"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">.pred</span><span class="op">)</span>
<span class="co">#&gt; $R</span>
<span class="co">#&gt; $R[[1]]</span>
<span class="co">#&gt; , , 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           [,1]      [,2]      [,3]</span>
<span class="co">#&gt; [1,] 1.0000000 0.2245499 0.4009276</span>
<span class="co">#&gt; [2,] 0.2245499 1.0000000 0.3023550</span>
<span class="co">#&gt; [3,] 0.4009276 0.3023550 1.0000000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           [,1]      [,2]      [,3]</span>
<span class="co">#&gt; [1,] 1.0000000 0.2363791 0.3991591</span>
<span class="co">#&gt; [2,] 0.2363791 1.0000000 0.3032042</span>
<span class="co">#&gt; [3,] 0.3991591 0.3032042 1.0000000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , 3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           [,1]      [,2]      [,3]</span>
<span class="co">#&gt; [1,] 1.0000000 0.2472140 0.3975391</span>
<span class="co">#&gt; [2,] 0.2472140 1.0000000 0.3039821</span>
<span class="co">#&gt; [3,] 0.3975391 0.3039821 1.0000000</span></code></pre></div>
</div>
<div id="copula-engine" class="section level2">
<h2 class="hasAnchor">
<a href="#copula-engine" class="anchor"></a>Copula Engine</h2>
<p>To create a model with the <code>c_rmgarch</code> engine, the first thing to do is to specify in a list called <strong>specs</strong> through set_engine the specifications of the models. You can also specify the arguments to be passed to <code><a href="https://rdrr.io/pkg/rmgarch/man/cgarchspec-methods.html">rmgarch::cgarchspec()</a></code> through the <strong>c_specs</strong> list as seen in the following example:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/garch_multivariate_reg.html">garch_multivariate_reg</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"ugarchspec"</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">set_engine</span><span class="op">(</span><span class="st">"c_rmgarch"</span> , specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>spec1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                          spec2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                          spec3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>armaOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                             c_specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>dccOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">fit</span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="va">date</span> <span class="op">+</span> <span class="va">id</span>, data <span class="op">=</span> <span class="va">rX_train</span><span class="op">)</span>

<span class="va">model_fit</span>
<span class="co">#&gt; parsnip model object</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Fit time:  2.7s </span>
<span class="co">#&gt; Copula GARCH Multivariate Model</span>
<span class="co">#&gt; $model_1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; *-------------------------------------------------*</span>
<span class="co">#&gt; *                  Copula GARCH Fit               *</span>
<span class="co">#&gt; *-------------------------------------------------*</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Distribution     :  mvnorm</span>
<span class="co">#&gt; No. of Parameters    :  15</span>
<span class="co">#&gt; [VAR GARCH CC]       : [0+15+0]</span>
<span class="co">#&gt; No. of Series        :  3</span>
<span class="co">#&gt; No. of Observations  :  2850</span>
<span class="co">#&gt; Log-Likelihood       :  24354.45</span>
<span class="co">#&gt; Av.Log-Likelihood    :  8.545 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Optimal Parameters</span>
<span class="co">#&gt; ---------------------------------------------------</span>
<span class="co">#&gt;                 Estimate  Std. Error   t value Pr(&gt;|t|)</span>
<span class="co">#&gt; [rIBM].mu       0.000342    0.000243  1.407912 0.159157</span>
<span class="co">#&gt; [rIBM].ar1     -0.013463    0.021468 -0.627106 0.530590</span>
<span class="co">#&gt; [rIBM].omega    0.000015    0.000020  0.768999 0.441894</span>
<span class="co">#&gt; [rIBM].alpha1   0.111158    0.094421  1.177258 0.239093</span>
<span class="co">#&gt; [rIBM].beta1    0.809517    0.129092  6.270842 0.000000</span>
<span class="co">#&gt; [rBP].mu        0.000465    0.000278  1.671176 0.094687</span>
<span class="co">#&gt; [rBP].ar1      -0.000551    0.020888 -0.026386 0.978950</span>
<span class="co">#&gt; [rBP].omega     0.000005    0.000009  0.575227 0.565138</span>
<span class="co">#&gt; [rBP].alpha1    0.080660    0.014273  5.651338 0.000000</span>
<span class="co">#&gt; [rBP].beta1     0.902935    0.026253 34.393855 0.000000</span>
<span class="co">#&gt; [rGOOG].mu      0.000852    0.000307  2.771785 0.005575</span>
<span class="co">#&gt; [rGOOG].ar1     0.009763    0.022858  0.427108 0.669301</span>
<span class="co">#&gt; [rGOOG].omega   0.000010    0.000002  6.681005 0.000000</span>
<span class="co">#&gt; [rGOOG].alpha1  0.087500    0.016032  5.457858 0.000000</span>
<span class="co">#&gt; [rGOOG].beta1   0.887105    0.014877 59.629962 0.000000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Information Criteria</span>
<span class="co">#&gt; ---------------------</span>
<span class="co">#&gt;                     </span>
<span class="co">#&gt; Akaike       -17.080</span>
<span class="co">#&gt; Bayes        -17.049</span>
<span class="co">#&gt; Shibata      -17.080</span>
<span class="co">#&gt; Hannan-Quinn -17.069</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Elapsed time : 1.056781</span></code></pre></div>
</div>
<div id="go-garch-engine" class="section level2">
<h2 class="hasAnchor">
<a href="#go-garch-engine" class="anchor"></a>Go-Garch Engine</h2>
<p>To create a model with the <code>gogarch_rmgarch</code> engine, you can specify the arguments to be passed to <code><a href="https://rdrr.io/pkg/rmgarch/man/gogarchspec-methods.html">rmgarch::gogarchspec()</a></code> through the <strong>gogarch_specs</strong> list. You can also specify other arguments that will be passed to <code><a href="https://rdrr.io/pkg/rmgarch/man/gogarchfit-methods.html">rmgarch::gogarchfit()</a></code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/garch_multivariate_reg.html">garch_multivariate_reg</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"ugarchspec"</span><span class="op">)</span> <span class="op">%&gt;%</span>
         <span class="fu">set_engine</span><span class="op">(</span><span class="st">"gogarch_rmgarch"</span> , gogarch_specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>variance.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>garchOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">fit</span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="va">date</span> <span class="op">+</span> <span class="va">id</span>, data <span class="op">=</span> <span class="va">rX_train</span><span class="op">)</span></code></pre></div>
<p>We now predict on the future dataset:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">model_fit</span>, <span class="va">rX_future</span><span class="op">)</span>
<span class="va">predictions</span>
<span class="co">#&gt; # A tibble: 11 x 2</span>
<span class="co">#&gt;    .name         .pred                  </span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;named list&gt;           </span>
<span class="co">#&gt;  1 factor.sigmas &lt;dbl[,3,1] [3 x 3 x 1]&gt;</span>
<span class="co">#&gt;  2 mu            &lt;dbl[,3,1] [3 x 3 x 1]&gt;</span>
<span class="co">#&gt;  3 A             &lt;dbl[,3] [3 x 3]&gt;      </span>
<span class="co">#&gt;  4 Y             &lt;dbl[,3] [2,850 x 3]&gt;  </span>
<span class="co">#&gt;  5 W             &lt;dbl[,3] [3 x 3]&gt;      </span>
<span class="co">#&gt;  6 K             &lt;dbl[,3] [3 x 3]&gt;      </span>
<span class="co">#&gt;  7 Kinv          &lt;dbl[,3] [3 x 3]&gt;      </span>
<span class="co">#&gt;  8 U             &lt;dbl[,3] [3 x 3]&gt;      </span>
<span class="co">#&gt;  9 arcoef        &lt;dbl[,3] [2 x 3]&gt;      </span>
<span class="co">#&gt; 10 garchcoef     &lt;dbl[,3] [5 x 3]&gt;      </span>
<span class="co">#&gt; 11 timer         &lt;drtn [1]&gt;</span></code></pre></div>
<p>Let’s look at the GARCH model coefficients:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">predictions</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">.name</span> <span class="op">==</span> <span class="st">"garchcoef"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">.pred</span><span class="op">)</span>
<span class="co">#&gt; $garchcoef</span>
<span class="co">#&gt;                [,1]       [,2]         [,3]</span>
<span class="co">#&gt; omega  1.203914e-01 0.02727819 1.128403e-01</span>
<span class="co">#&gt; alpha1 2.488378e-01 0.04707957 9.847686e-02</span>
<span class="co">#&gt; alpha2 9.814023e-14 0.09979280 6.129336e-10</span>
<span class="co">#&gt; beta1  2.762825e-01 0.11460042 3.279989e-01</span>
<span class="co">#&gt; beta2  4.003020e-01 0.70724997 4.634035e-01</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alberto Almuiña.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
